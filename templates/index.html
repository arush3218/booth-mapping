<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration - Booth Mapping Tool</title>
    <link rel="stylesheet" href="/static/css/app.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <a href="/" class="logo">booth.mapping</a>
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/instructions" class="nav-link">Instructions</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <header class="page-header">
            <h1>üó∫Ô∏è Booth Mapping Configuration</h1>
            <p class="subtitle">Configure and process electoral booth data</p>
        </header>

        <div class="main-content">
            <!-- Sidebar Configuration -->
            <aside class="sidebar">
                <h2>Configuration</h2>
                
                <div class="form-group">
                    <label for="state-select">Select State</label>
                    <select id="state-select" class="form-control">
                        <option value="">-- Select State --</option>
                        {% for state in states %}
                        <option value="{{ state }}">{{ state }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label>Selection Type</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="selection-type" value="AC wise" checked>
                            AC wise
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="selection-type" value="PC wise">
                            PC wise
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="samples-input">Samples per AC/PC</label>
                    <input type="number" id="samples-input" class="form-control" 
                           min="25" max="5000" step="25" value="300">
                    <small class="help-text">25 samples = 1 cluster. Each cluster will have 2 booths selected.</small>
                </div>

                <div id="config-info" class="info-box" style="display: none;">
                    <h4>Configuration:</h4>
                    <p id="config-details"></p>
                </div>

                <button id="generate-btn" class="btn btn-primary" disabled>
                    Generate Results for All
                </button>

                <div id="progress-section" style="display: none;">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <p id="progress-text" class="progress-text"></p>
                </div>

                <div id="error-message" class="error-message" style="display: none;"></div>
                <div id="success-message" class="success-message" style="display: none;"></div>
            </aside>

            <!-- Main Content Area -->
            <main class="content">
                <div id="welcome-section" class="welcome-section">
                    <div class="welcome-card">
                        <div class="welcome-icon">üó∫Ô∏è</div>
                        <h2>Ready to Process</h2>
                        <p>Configure settings in the sidebar and click 'Generate Results' to begin processing booth data.</p>
                        <div class="quick-links">
                            <a href="/instructions" class="quick-link">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 16v-4M12 8h.01"/>
                                </svg>
                                Need Help?
                            </a>
                        </div>
                    </div>
                </div>

                <div id="results-section" style="display: none;">
                    <h2>Processing Results</h2>
                    
                    <div id="stats-cards" class="stats-cards">
                        <div class="stat-card">
                            <h3 id="stat-total-acs">0</h3>
                            <p>Total ACs/PCs</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat-completed">0/0</h3>
                            <p>Completed</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat-total-booths">0</h3>
                            <p>Total Booths</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat-total-selected">0</h3>
                            <p>Total Selected</p>
                        </div>
                    </div>

                    <div class="tabs">
                        <button class="tab-btn active" data-tab="summary">üìä Summary</button>
                        <button class="tab-btn" data-tab="booths">üìã Selected Booths</button>
                        <button class="tab-btn" data-tab="maps">üó∫Ô∏è Maps</button>
                    </div>

                    <div class="tab-content">
                        <!-- Summary Tab -->
                        <div id="summary-tab" class="tab-pane active">
                            <div class="tab-header">
                                <h3>Summary</h3>
                                <button id="download-summary-btn" class="btn btn-secondary">Download Summary CSV</button>
                            </div>
                            <div class="table-container">
                                <table id="summary-table" class="data-table">
                                    <thead></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Selected Booths Tab -->
                        <div id="booths-tab" class="tab-pane">
                            <div class="tab-header">
                                <h3>Selected Booths</h3>
                                <button id="download-booths-btn" class="btn btn-secondary">Download Selected Booths CSV</button>
                            </div>
                            <div class="table-container">
                                <table id="booths-table" class="data-table">
                                    <thead></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Maps Tab -->
                        <div id="maps-tab" class="tab-pane">
                            <div class="tab-header">
                                <h3>Interactive Maps</h3>
                                <button id="download-maps-btn" class="btn btn-secondary">Download All Maps (ZIP)</button>
                            </div>
                            <div class="form-group">
                                <label for="map-select">Select AC/PC to view map</label>
                                <select id="map-select" class="form-control">
                                    <option value="">-- Select AC/PC --</option>
                                </select>
                            </div>
                            <div id="map-viewer" class="map-viewer">
                                <p class="text-muted">Select an AC/PC to view its map</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <footer class="footer">
            <p>¬© 2025 Booth Mapping Tool ‚Ä¢ Powered by FastAPI</p>
        </footer>
    </div>

    <script src="/static/js/script.js"></script>
</body>
</html>
